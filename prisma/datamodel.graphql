type Team {
  id: ID! @unique
  name: String!
  accounts: [Account!]!
  members: [TeamMember!]!
}

type User {
  id: ID! @unique
  email: String! @unique
  firstName: String!
  lastName: String
  passwordHash: String!
  teams: [TeamMember!]!
}

enum TeamMemberRole {
  ADMIN
  MANAGER
  MEMBER
}

type TeamMember {
  id: ID! @unique
  team: Team!
  user: User!
  role: TeamMemberRole! @default(value: "MEMBER")
  canInvite: Boolean! @default(value: "false")
  accounts: [TeamMemberAccount!]!
}

type Account {
  id: ID! @unique
  name: String!
  balance: Float! @default(value: "0.0")
  revenue: Float! @default(value: "0.0")
  spendings: Float! @default(value: "0.0")
  payments: [Payment!]!
  team: Team!
  members: [TeamMemberAccount!]!
  rawData: Json
}

type TeamMemberAccount {
  id: ID! @unique
  teamMember: TeamMember!
  account: Account!
}

type Payment {
  id: ID! @unique
  postedDate: DateTime!
  amount: Float!
  category: Category
  account: Account!
  peerAccountName: String!
  comments: [Comment!]!
  rawData: Json!
}

type Comment {
  id: ID! @unique
  payment: Payment!
  user: User
  body: Json!
}

type Category {
  id: ID! @unique
  name: String!
  color: String!
}
